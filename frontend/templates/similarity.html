<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>Similar Events | EventLinker</title>

    <link rel="stylesheet" href="{{ url_for('static', filename='styles/attendee_homepage.css') }}" />
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>

<body>
    <div class="page-bg"></div>

    <header class="navbar">
        <div class="nav-left">
            <div class="logo">
                <img src="{{ url_for('static', filename='images/event-linker-logo.png') }}" class="logo-icon">
                <div class="logo-text-wrap">
                    <span class="logo-text">EventLinker</span>
                    <small class="logo-tagline">Attendee Dashboard</small>
                </div>
                <div class="logo-box"></div>
            </div>
        </div>

        <nav class="nav-links">
            <a href="{{ url_for('attendee_bp.attendee_homepage') }}"
            class="{% if request.endpoint == 'attendee_bp.attendee_homepage' %}active{% endif %}">
            Dashboard
          </a>
            <!-- <a href="#" onclick="openAboutModal()">About</a>
            <a href="{{ url_for('attendee_bp.attendee_connections') }}" id="connections">Connections</a>
            <a href="{{ url_for('attendee_bp.attendee_similarity') }}">Similarity</a> -->

            <!-- <div class="dropdown">
                <a href="#" id="eventsLink">My Events ▾</a>
                <div id="eventsSubmenu" class="submenu-vertical">
                    <a href="{{ url_for('attendee_bp.attendee_registered_events') }}">Registered</a>
                </div>
            </div> -->
            <!-- MY EVENTS DROPDOWN -->
      <div class="dropdown">
        <a href="#" id="eventsLink">My Events ▾</a>

        <div class="submenu-vertical" id="eventsSubmenu">
            <a href="{{ url_for('attendee_bp.attendee_registered_events') }}">
                Registered Events
            </a>

            <a href="{{ url_for('attendee_bp.attendee_my_connections') }}">
                My Connections
            </a>

            <a href="{{ url_for('attendee_bp.attendee_similarity') }}">
                Suggested Events
            </a>

        </div>
      </div>

      <a href="{{ url_for('attendee_bp.attendee_connections') }}" id="connections">
        Notifications
        {% if g.pending_request_count > 0 %}
          <span class="notification-badge">{{ g.pending_request_count }}</span>
        {% endif %}
      </a>

            <div class="profile-dropdown-wrapper">
                <div class="profile-icon-btn" onclick="toggleProfileDropdown()">
                    <i class="fa fa-user"></i>
                </div>
            
                <div id="profileDropdown" class="profile-dropdown-menu">
                    <a href="{{ url_for('user_bp.user_profile') }}">
                        <i class="fa fa-user"></i> Profile
                    </a>
                    <a href="{{ url_for('attendee_bp.about_page') }}">
                        <i class="fa fa-info-circle"></i> About Us
                    </a>
                    <a href="{{ url_for('user_bp.logout_user') }}">
                        <i class="fa fa-sign-out"></i> Logout
                    </a>
                </div>
            </div>
        </nav>
    </header>

    <section class="event-cards-section">
        <h2 style="text-align:center; margin-bottom: 1rem;">Recommended for you</h2>

        <div class="card-container">
            {% for event in recommended_events %}
            <div class="card">
                {% if event.image_path %}
                <img src="{{ event.image_path }}" alt="{{ event.event_title }}" class="card-image">
                {% endif %}

                <div class="card-content">
                    <h3 class="card-title">{{ event.event_title }}</h3>

                    <p class="card-meta">
                        <i class="fa fa-calendar"></i> {{ event.event_date }} |
                        <i class="fa fa-map-marker"></i> {{ event.location }}
                    </p>

                    <p class="card-description">
                        {{ event.description }}
                    </p>

                    <a href="{{ url_for('attendee_bp.attendee_event_details', event_id=event.event_id) }}">
                        <button class="btn-primary card-button">View</button>
                    </a>
                </div>
            </div>
            {% endfor %}

            {% if recommended_events|length == 0 %}
            <p style="text-align:center; padding:20px; font-size:1.1rem;">
                No AI recommendations yet. Try adding your bio & interests in Profile or registering for some events.
            </p>
            {% endif %}
        </div>
    </section>

    <footer class="footer">
        <p>© 2025 EventLinker. All rights reserved.</p>
    </footer>

    <script>
        function toggleProfileDropdown() {
        const menu = document.getElementById("profileDropdown");
        menu.style.display = menu.style.display === "flex" ? "none" : "flex";
    }

    // Close dropdown if clicking outside
    document.addEventListener("click", function (event) {
        const dropdown = document.getElementById("profileDropdown");
        const btn = document.querySelector(".profile-icon-btn");

        if (!dropdown.contains(event.target) && !btn.contains(event.target)) {
            dropdown.style.display = "none";
        }
    });

    document.getElementById('eventsLink').addEventListener('click', function (e) {
    e.preventDefault();
    });

    </script>
</body>

</html>