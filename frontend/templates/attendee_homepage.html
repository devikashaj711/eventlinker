<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>EventLinker - Attendee</title>

  <link rel="stylesheet" href="{{ url_for('static', filename='styles/attendee_homepage.css') }}" />

  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>

<body>


  <div class="page-bg"></div>

  <!-- NAVBAR (shared look with registration screen) -->
  <header class="navbar">
    <div class="nav-left">
      <div class="logo">
        <img src="{{ url_for('static', filename='images/event-linker-logo.png') }}" class="logo-icon">
        <div class="logo-text-wrap">
          <span class="logo-text">EventLinker</span>
          <small class="logo-tagline">Attendee Dashboard</small>
        </div>
        <div class="logo-box">
        </div>
      </div>
    </div>

    <nav class="nav-links">
      <a href="{{ url_for('attendee_bp.about_page') }}">About Us</a>

      <!-- Role switch dropdown (only when real role_id == 1) -->
      {% if is_organizer %}
      <form method="post" action="{{ url_for('user_bp.switch_view') }}" class="role-switch-form">
        <label for="active_role">View as:</label>

        <span class="role-switch-select-wrapper">
          <select name="active_role" id="active_role" onchange="this.form.submit()">
            <option value="organizer" {% if active_role=='organizer' %}selected{% endif %}>Organizer</option>
            <option value="attendee" {% if active_role=='attendee' %}selected{% endif %}>Attendee</option>
          </select>
        </span>
      </form>
      {% endif %}

      <a href="{{ url_for('attendee_bp.attendee_connections') }}" id="connections">
        Notifications
        {% if g.pending_request_count > 0 %}
        <span class="notification-badge">{{ g.pending_request_count }}</span>
        {% endif %}
      </a>
      <a href="#">Similarity</a>
      <!-- Events dropdown -->
      <div class="dropdown">
        <a href="#" id="eventsLink">My Events ▾</a>
        <div id="eventsSubmenu" class="submenu-vertical">
          <a href="{{ url_for('attendee_bp.attendee_registered_events') }}">Registered</a>
        </div>
      </div>

      <a href="{{ url_for('user_bp.user_profile') }}" class="profile-link">
        <i class="fa fa-user profile-icon"></i>
        <span class="profile-text">Profile</span>
      </a>
      <a href="{{ url_for('user_bp.logout_user') }}" class="logout-link">
        <i class="fa fa-sign-out"></i>
        <span class="profile-text">Logout</span>
      </a>
    </nav>
  </header>

  <section class="event-cards-section">
    <div class="card-container">

      {% for event in events %}
      <div class="card">
        <img src="{{ event.image_path }}" alt="{{ event.event_title }}" class="card-image">

        <div class="card-content">
          <h3 class="card-title">{{ event.event_title }}</h3>

          <p class="card-meta">
            <i class="fa fa-calendar"></i> {{ event.event_date }} |
            <i class="fa fa-map-marker"></i> {{ event.location }}
          </p>

          <p class="card-description">
            {{ event.description }}
          </p>

          {% if from_registered %}
          <a href="{{ url_for('attendee_bp.attendee_event_details', event_id=event.event_id, registered=1) }}">
            {% else %}
            <a href="{{ url_for('attendee_bp.attendee_event_details', event_id=event.event_id) }}">
              {% endif %}
              <button class="btn-primary card-button">View</button>
            </a>
        </div>
      </div>
      {% endfor %}

      {% if events|length == 0 %}
      <p style="text-align:center; padding:20px; font-size:1.1rem;">
        No events available at the moment.
      </p>
      {% endif %}

    </div>
  </section>

  <footer class="footer">
    <p>© 2025 EventLinker. All rights reserved.</p>
  </footer>

  <!-- ABOUT MODAL
  <div id="aboutModal" class="modal">
    <div class="modal-content about-content">
      <h2>About EventLinker</h2>
      <p>
        EventLinker is an integrated event networking platform designed for organizers and attendees.
        It allows event creation, QR-based attendee onboarding, profile creation, and seamless
        networking through social links. Built using Flask, MySQL, AWS S3, and a modern UI,
        EventLinker simplifies event management and enhances professional connections.
      </p>
      <button class="modal-btn" onclick="closeAboutModal()">Close</button>
    </div>
  </div> -->

  <script>
    // About modal
    // function openAboutModal() {
    //   document.getElementById('aboutModal').style.display = 'flex';
    // }
    // function closeAboutModal() {
    //   document.getElementById('aboutModal').style.display = 'none';
    // }
    // window.onclick = function (e) {
    //   let modal = document.getElementById('aboutModal');
    //   if (e.target === modal) {
    //     modal.style.display = "none";
    //   }
    // }

    const eventsLink = document.getElementById('eventsLink');
    const eventsSubmenu = document.getElementById('eventsSubmenu');

    eventsLink.addEventListener('click', function (e) {
      e.preventDefault();
      eventsSubmenu.classList.toggle('active');
    });

    window.addEventListener('click', function (e) {
      if (!eventsLink.contains(e.target) && !eventsSubmenu.contains(e.target)) {
        eventsSubmenu.classList.remove('active');
      }
    });


  </script>
</body>

</html>